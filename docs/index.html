<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>Visual Viewport Segments API polyfill</h1>
<p>This is a polyfill for the <a href="https://wicg.github.io/visual-viewport/#the-visualviewport-interface">proposed</a> JavaScript visual viewport segments for foldable and dual-screen devices.</p>
<p>Web developers targeting foldable devices want to be able to effectively lay out the content in a window that spans multiple displays. In some cases such as Canvas context or very unpredictable layouts, developers will need a JavaScript APIs to learn about available screens, their segments and natural boundaries.</p>
<p>This polyfill is only useful for the desktop or for devices not supporting the API. If you run it on the Surface Duo the polyfill will not do anything.</p>
<h3>The 'segments' on visualViewport object</h3>
<p>The <code>segments</code> method will return an array of screen segments, each segment is an object containing <code>width</code>, <code>height</code>, <code>top</code> ,<code>left</code>, <code>right</code> and <code>bottom</code> properties (aka segment's bounding rects)</p>
<p><img src="https://raw.githubusercontent.com/foldable-devices/viewportsegments-polyfill/master/images/screens.png" alt="Figure showing a foldable devices with 2 screens"></p>
<h4>Example Usage</h4>
<pre class="prettyprint source lang-js"><code>const segments = window.visualViewport.segments();

console.log(screenSegments.length) // 2 in the example above

</code></pre>
<h1>How to use the polyfill</h1>
<p>This polyfill is packaged as a JavaScript module. It is available on NPM over <a href="https://www.npmjs.com/package/viewportsegments-polyfill">here</a>.</p>
<p>To install the polyfill just run:</p>
<pre class="prettyprint source lang-bash"><code>npm install --save viewportsegments-polyfill
</code></pre>
<p>Then you can include it in your project:</p>
<pre class="prettyprint source lang-html"><code>&lt;script type=&quot;module&quot; src=&quot;/path/to/modules/viewportsegments-polyfill.js&quot;>&lt;/script>
</code></pre>
<p>or in your JavaScript source file</p>
<pre class="prettyprint source lang-js"><code>import &quot;/path/to/modules/viewportsegments-polyfill/viewportsegments-polyfill.js&quot;;
</code></pre>
<p>That's it. See the <code>demo/basic</code> directory for examples.</p>
<p>In order to change the display configuration, you can use the polyfill together with an emulator or you can change the settings manually. The settings are stored across sessions.</p>
<h4>Manually changing the display configuration</h4>
<p>You can update values such as <code>horizontalViewportSegments</code>, <code>verticalViewportSegments</code>, <code>foldSize</code> and <code>browserShellSize</code> by importing the <code>FoldablesFeature</code> object. You can also subscribe to the 'change' event to be notified whenever the environment variables change. That can happen due to window resizes or because the configuration values were changed programmatically.</p>
<pre class="prettyprint source lang-js"><code>  import { FoldablesFeature } from '/path/to/modules/viewportsegments-polyfill/viewportsegments-polyfill.js';

  const foldablesFeat = new FoldablesFeature;

  // Add an event listener.
  foldablesFeat.onchange = () => console.log(&quot;change&quot;);

    // Add as many event listeners as you want.
  foldablesFeat.addEventListener('change', () => console.log(&quot;change&quot;));

  // Change a single value; results in one update (one 'change' event firing).
  foldablesFeat.foldSize = 20;

  // Change multiple values by assignment; results in one update.
  Object.assign(foldablesFeat, { foldSize: 50, verticalViewportSegments: &quot;2&quot;});

  // Change multiple values in one scope; results in one update
  (function() { foldablesFeat.foldSize = 100; foldablesFeat.verticalViewportSegments = &quot;2&quot; })();
</code></pre>
<h1>Documentation</h1>
<p>Located <a href="https://foldable-devices.github.io/viewportsegments-polyfill/docs/global.html">here</a>.</p>
<h1>Test suite</h1>
<p>There are unfortunately no <a href="https://github.com/w3c/web-platform-tests/">web-platform-tests</a> available yet.</p>
<h1>Known issues</h1>
<p>Check GitHub <a href="https://github.com/foldable-devices/viewportsegments-polyfill/issues">here</a>.</p>
<h1>Learn more</h1>
<ul>
<li><a href="https://docs.microsoft.com/en-us/dual-screen/web/javascript-viewport-segments">Explainer</a> - a document explaining how this feature was designed and how it fits together with other APIs.</li>
<li><a href="https://github.com/foldable-devices/viewportsegments-css-polyfill">CSS Viewport Segment Media Feature Polyfill</a></li>
</ul></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#debounce">debounce</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Wed Apr 19 2023 15:48:16 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>